settings.load("settings")
modem = peripheral.wrap("back")
modem.open(1337)
print("Wireless door interface had been initialized.")

function haveAccess(a, b)
	return bit.band(bit.brshift(a, b), 1)
end

function doorOpen()
	redstone.setOutput("bottom", true)
	sleep(1)
	redstone.setOutput("bottom", false)
end

while true do
	id, side, port, receivePort, data, distance = os.pullEvent("modem_message")
	if (distance < 4) then
		if haveAccess(data, tonumber(settings.get("level"))) then
			doorOpen()
		end
	end
end
