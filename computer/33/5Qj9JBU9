settings.load("settings")
modem = peripheral.find("modem")
modem.open(1337)
print("Wireless door interface had been initialized.")
print("Build: 3")

function haveAccess(a, b)
	return bit.band(bit.brshift(a, b), 1)
end

function doorOpen()
	redstone.setOutput("left", true)
	sleep(1)
	redstone.setOutput("left", false)
end

while true do
	id, side, port, receivePort, data, distance = os.pullEvent("modem_message")
	if (distance < 4) then
		if haveAccess(data, tonumber(settings.get("level"))) == 1 then
			doorOpen()
		end
	end
end