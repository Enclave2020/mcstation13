function haveAccess(a, b)
	return bit.band(bit.brshift(a, b), 1)
end

function readAccess()
	if not fs.exists("/disk/access") then
		return 0
	end

	h = fs.open("/disk/access", "r")
	return tonumber(h.readLine())
end

function doorAccess()
	if not fs.exists("/level") then
		print("This door have no level set.")
		return 0
	end	

	h = fs.open("/level", "r")
	return tonumber(h.readLine())	
end

function doorValid()
	return haveAccess(readAccess(), doorAccess())
end

function doorOpen()
	redstone.setOutput("bottom", true)
	sleep(2)
	redstone.setOutput("bottom", false)
end

function update()
	fs.delete("startup")
	shell.run("pastebin get 5Qj9JBU9 startup")
	term.clear()
end

update()
print("doorOS B0")
while true do
	local event, side = os.pullEvent()
	if event == "disk" then
		if doorValid() == 1 then 
			doorOpen()
		end
	end
end